(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{KwPE:function(t,e,n){"use strict";n.r(e),n.d(e,"DragLayerModule",(function(){return O}));var i=n("2kYt"),r=n("sEIs"),s=n("Qq0t"),c=n("EM62"),a=n("8dL6"),o=n("xVbo"),l=n("YtkY");let g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Fb({type:t,selectors:[["app-box"]],inputs:{title:"title"},decls:2,vars:1,template:function(t,e){1&t&&(c.Rb(0,"div"),c.tc(1),c.Qb()),2&t&&(c.zb(1),c.vc(" ",e.title," "))},styles:["div[_ngcontent-%COMP%] { border: 1px dashed grey;\n          cursor: move;\n          padding: 0.5rem 1rem; }"]}),t})(),p=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Fb({type:t,selectors:[["app-box-drag-preview"]],inputs:{title:"title"},decls:2,vars:1,consts:[[1,"phresh"],[3,"title"]],template:function(t,e){1&t&&(c.Rb(0,"div",0),c.Mb(1,"app-box",1),c.Qb()),2&t&&(c.zb(1),c.gc("title",e.title))},directives:[g],styles:["[_nghost-%COMP%] { display: inline-block; }\n    @keyframes animatedBackground {\n      from { background: yellow; }\n      to { background: white; }\n    }\n    .phresh[_ngcontent-%COMP%] {\n      background: white;\n      transform: rotate(-10deg);\n      overflow: hidden;\n      animation-name: animatedBackground;\n      animation-duration: 0.7s;\n      animation-iteration-count: infinite;\n      animation-timing-function: linear;\n      animation-direction: alternate;\n    }"]}),t})();function d(t,e){if(1&t&&(c.Pb(0),c.Mb(1,"app-box-drag-preview",5),c.Ob()),2&t){const t=c.bc(2).ngIf;c.zb(1),c.gc("title",t.item.title)}}function b(t,e){if(1&t&&(c.Rb(0,"div",2),c.cc(1,"async"),c.Pb(2,3),c.rc(3,d,2,1,"ng-container",4),c.Ob(),c.Qb()),2&t){const t=c.bc().ngIf,e=c.bc();c.gc("ngStyle",c.dc(1,3,e.forStyle$)),c.zb(2),c.gc("ngSwitch",t.itemType),c.zb(1),c.gc("ngSwitchCase","BOX")}}function u(t,e){if(1&t&&(c.Pb(0),c.rc(1,b,4,5,"div",1),c.Ob()),2&t){const t=e.ngIf;c.zb(1),c.gc("ngIf",t.isDragging)}}let f=(()=>{class t{constructor(t){this.dnd=t,this.dragLayer=this.dnd.dragLayer(),this.collect$=this.dragLayer.listen(t=>({item:t.getItem(),itemType:t.getItemType(),isDragging:t.isDragging(),initialOffset:t.getInitialSourceClientOffset(),currentOffset:t.getSourceClientOffset()})),this.forStyle$=this.collect$.pipe(Object(o.a)(t=>t.isDragging),Object(l.a)(t=>this.getItemStyles(t))),this.snapToGrid=!1}ngOnInit(){}ngOnDestroy(){this.dragLayer.unsubscribe()}getItemStyles({initialOffset:t,currentOffset:e}){if(!t||!e)return{display:"none"};let{x:n,y:i}=e;this.snapToGrid&&(n-=t.x,i-=t.y,[n,i]=function(t,e){return[32*Math.round(t/32),32*Math.round(e/32)]}(n,i),n+=t.x,i+=t.y);const r=`translate(${n}px, ${i}px)`;return{transform:r,WebkitTransform:r}}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(s.c))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-custom-drag-layer"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"ngStyle",4,"ngIf"],[3,"ngStyle"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"title"]],template:function(t,e){1&t&&(c.rc(0,u,2,1,"ng-container",0),c.cc(1,"async")),2&t&&c.gc("ngIf",c.dc(1,1,e.collect$))},directives:[i.l,i.m,i.n,i.o,p],pipes:[i.b],styles:["[_nghost-%COMP%] {\n      display: block;\n      position: fixed;\n      pointer-events: none;\n      z-index: 100;\n      left: 0;\n      top: 0;\n      width: 100%; height: 100%;\n    }"],changeDetection:0}),t})();var h=n("xBIF"),y=n("NyMZ");let m=(()=>{class t{constructor(t){this.dnd=t,this.source=this.dnd.dragSource("BOX",{beginDrag:()=>{const{id:t,title:e,left:n,top:i}=this;return{id:t,title:e,left:n,top:i}}}),this.isDragging$=this.source.listen(t=>t.isDragging())}ngOnInit(){this.source.connectDragPreview(Object(y.a)(),{captureDraggingState:!0})}ngOnDestroy(){this.source.unsubscribe()}getStyles(t){const{left:e,top:n}=this,i=`translate3d(${e}px, ${n}px, 0)`;return{position:"absolute",transform:i,WebkitTransform:i,opacity:t?0:null,height:t?0:null}}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(s.c))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-draggable-box"]],inputs:{id:"id",title:"title",left:"left",top:"top"},decls:3,vars:5,consts:[[1,"draggable-box",3,"dragSource","ngStyle"],[3,"title"]],template:function(t,e){1&t&&(c.Rb(0,"div",0),c.cc(1,"async"),c.Mb(2,"app-box",1),c.Qb()),2&t&&(c.gc("dragSource",e.source)("ngStyle",e.getStyles(c.dc(1,3,e.isDragging$))),c.zb(2),c.gc("title",e.title))},directives:[h.c,i.m,g],pipes:[i.b],encapsulation:2,changeDetection:0}),t})(),x=(()=>{class t{constructor(t){this.dnd=t,this.x=30,this.y=90,this.styles={minHeight:"300px",maxWidth:"400px",maxHeight:"400px",width:"100%",height:"100%",boxSizing:"border-box",border:"1px solid black",position:"relative"},this.boxTarget=this.dnd.dropTarget("BOX",{drop:t=>{const e=t.getDifferenceFromInitialOffset(),n=t.getItem();this.moveBox(n.id,n.left+e.x,n.top+e.y)}})}moveBox(t,e,n){this.x=e,this.y=n}ngOnInit(){}ngOnDestroy(){this.boxTarget.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(s.c))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-drag-container"]],decls:2,vars:4,consts:[[3,"ngStyle","dropTarget"],["id","23","title","this box is titled",3,"left","top"]],template:function(t,e){1&t&&(c.Rb(0,"div",0),c.Mb(1,"app-draggable-box",1),c.Qb()),2&t&&(c.gc("ngStyle",e.styles)("dropTarget",e.boxTarget),c.zb(1),c.gc("left",e.x)("top",e.y))},directives:[i.m,h.d,m],encapsulation:2}),t})(),v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Fb({type:t,selectors:[["app-drag-layer-container"]],decls:3,vars:0,consts:[["path","drag-layer"]],template:function(t,e){1&t&&(c.Mb(0,"app-example-link",0),c.Mb(1,"app-custom-drag-layer"),c.Mb(2,"app-drag-container"))},directives:[a.a,f,x],encapsulation:2}),t})();var w=n("JqZp");let O=(()=>{class t{}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},imports:[[i.c,s.b,r.d.forChild([{path:"",component:v}]),w.a]]}),t})()}}]);