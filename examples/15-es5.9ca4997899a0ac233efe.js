function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a=[],c=!0,o=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(s){o=!0,i=s}finally{try{c||null==r.return||r.return()}finally{if(o)throw i}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{VpmW:function(e,t,r){"use strict";r.r(t),r.d(t,"BasicSortableModule",(function(){return S}));var n=r("2kYt"),i=r("sEIs"),a=r("Qq0t"),c=r("m3KN"),o=r("JqZp"),s=r("EM62"),d=r("8dL6"),l=r("4s1X"),u=r("xBIF");function b(e,t){1&e&&s.Nb(0)}var g,p,f=function(e){return{$implicit:e}},h=((p=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||p)},p.\u0275dir=s.Gb({type:p,selectors:[["","cardInner",""]]}),p),m=((g=function(){function e(t,r){var n=this;_classCallCheck(this,e),this.elRef=t,this.dnd=r,this.beginDrag=new s.n,this.endDrag=new s.n,this.handleMove=new s.n,this.cardSource=this.dnd.dragSource("CARD",{beginDrag:function(){return n.beginDrag.emit(),{id:n.id,index:n.index}},endDrag:function(e){var t=e.didDrop();n.endDrag.emit(t)}}),this.cardTarget=this.dnd.dropTarget("CARD",{hover:function(e){var t=e.getItem().index,r=n.index;if(t!==r){var i=n.elRef.nativeElement.getBoundingClientRect(),a=(i.bottom-i.top)/2,c=e.getClientOffset().y-i.top;t<r&&c<a||t>r&&c>a||(n.handleMove.emit([t,r]),e.getItem().index=r)}}}),this.isDragging$=this.cardSource.listen((function(e){return e.isDragging()})),this.opacity$=this.cardSource.listen((function(e){return e.isDragging()?.2:1}))}return _createClass(e,[{key:"moveCard",value:function(e,t){this.handleMove.emit([e,t])}},{key:"ngOnDestroy",value:function(){this.cardSource.unsubscribe(),this.cardTarget.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||g)(s.Lb(s.l),s.Lb(a.c))},g.\u0275cmp=s.Fb({type:g,selectors:[["app-card"]],contentQueries:function(e,t,r){var n;1&e&&s.Db(r,h,!0,s.K),2&e&&s.lc(n=s.ac())&&(t.cardInnerTemplate=n.first)},inputs:{card:"card",index:"index",id:"id",text:"text"},outputs:{beginDrag:"beginDrag",endDrag:"endDrag",handleMove:"handleMove"},decls:4,vars:10,consts:[[1,"card",3,"dropTarget","dragSource"],[1,"border"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(s.Rb(0,"div",0),s.cc(1,"async"),s.Rb(2,"div",1),s.rc(3,b,1,0,"ng-container",2),s.Qb(),s.Qb()),2&e&&(s.qc("opacity",s.dc(1,6,t.opacity$)),s.gc("dropTarget",t.cardTarget)("dragSource",t.cardSource),s.zb(3),s.gc("ngTemplateOutlet",t.cardInnerTemplate)("ngTemplateOutletContext",s.ic(8,f,t.card)))},directives:[u.d,u.c,n.p],pipes:[n.b],styles:[".card[_ngcontent-%COMP%] {\n        padding-bottom: 0.25rem;\n        background-color: white;\n        cursor: move;\n    }\n    .border[_ngcontent-%COMP%] {\n        padding: 0.5rem 1rem;\n        border: 1px dashed gray;\n    }"],changeDetection:0}),g);function y(e,t){if(1&e&&(s.Rb(0,"span"),s.tc(1),s.Qb()),2&e){var r=t.$implicit,n=s.bc(2).item;s.zb(1),s.wc("",n.index+1," ",r.text,"")}}function v(e,t){if(1&e&&(s.Rb(0,"app-card",4),s.rc(1,y,2,2,"span",5),s.Qb()),2&e){var r=s.bc().item,n=s.bc();s.gc("card",n.findCard(r.id))}}function C(e,t){1&e&&(s.Rb(0,"div",2),s.rc(1,v,2,1,"app-card",3),s.Qb()),2&e&&(s.gc("ngSwitch",t.$implicit),s.zb(1),s.gc("ngSwitchCase","CARD"))}function w(e,t){if(1&e&&(s.Rb(0,"span"),s.tc(1),s.Qb()),2&e){var r=t.$implicit;s.zb(1),s.uc(r.text)}}function D(e,t){if(1&e){var r=s.Sb();s.Rb(0,"app-card",6),s.Zb("handleMove",(function(e){return s.nc(r),s.bc().moveCard(e)}))("beginDrag",(function(e){return s.nc(r),s.bc().beginDrag(e)}))("endDrag",(function(e){return s.nc(r),s.bc().endDrag(e)})),s.rc(1,w,2,1,"span",5),s.Qb()}if(2&e){var n=t.$implicit;s.gc("index",t.index)("id",n.id)("card",n)}}var x,k,R,_=((x=function(){function e(){_classCallCheck(this,e),this.cards=[{id:1,text:"Write a cool JS library"},{id:2,text:"Make it generic enough"},{id:3,text:"Write README"},{id:4,text:"Create some examples"},{id:5,text:"Write a glorious Medium post to promote it (note that this element is taller, and far more important, than the others)"},{id:6,text:"Sit back and relax"}],this.origCards=this.cards}return _createClass(e,[{key:"findCard",value:function(e){return this.cards.find((function(t){return t.id===e}))}},{key:"beginDrag",value:function(){this.origCards=this.cards.slice(0)}},{key:"endDrag",value:function(e){e||(this.cards=this.origCards)}},{key:"moveCard",value:function(e){var t=_slicedToArray(e,2),r=t[0],n=t[1],i=this.cards[r];this.cards.splice(r,1),this.cards.splice(n,0,i)}},{key:"tracker",value:function(e,t){return t.id}}]),e}()).\u0275fac=function(e){return new(e||x)},x.\u0275cmp=s.Fb({type:x,selectors:[["basic-sortable"]],decls:4,vars:2,consts:[[1,"sorted"],[3,"index","id","card","handleMove","beginDrag","endDrag",4,"ngFor","ngForOf","ngForTrackBy"],[1,"sorted",3,"ngSwitch"],[3,"card",4,"ngSwitchCase"],[3,"card"],[4,"cardInner"],[3,"index","id","card","handleMove","beginDrag","endDrag"]],template:function(e,t){1&e&&(s.Rb(0,"dnd-preview"),s.rc(1,C,2,2,"ng-template"),s.Qb(),s.Rb(2,"div",0),s.rc(3,D,2,3,"app-card",1),s.Qb()),2&e&&(s.zb(3),s.gc("ngForOf",t.cards)("ngForTrackBy",t.tracker))},directives:[l.a,n.k,n.n,n.o,m,h],styles:[".sorted[_ngcontent-%COMP%] { width: 100%; max-width: 400px; }"]}),x),T=function(){return["/sortable","simple"]},Q=((R=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||R)},R.\u0275cmp=s.Fb({type:R,selectors:[["basic-sortable-container"]],decls:34,vars:2,consts:[["path","basic-sortable"],[3,"routerLink"]],template:function(e,t){1&e&&(s.Mb(0,"app-example-link",0),s.Rb(1,"p"),s.tc(2," You can make a sortable by: "),s.Qb(),s.Rb(3,"ul"),s.Rb(4,"li"),s.tc(5,"giving each card a "),s.Rb(6,"code"),s.tc(7,"DragSource"),s.Qb(),s.tc(8," and a "),s.Rb(9,"code"),s.tc(10,"DropTarget"),s.Qb(),s.tc(11,";"),s.Qb(),s.Rb(12,"li"),s.tc(13,"determining when you are hovering on the upper or lower half of a neighbouring card using "),s.Rb(14,"code"),s.tc(15,"monitor.getClientOffset()"),s.Qb(),s.tc(16,"; "),s.Qb(),s.Rb(17,"li"),s.tc(18,"working out when a reordering is necessary by comparing the index with the item in flight's index;"),s.Qb(),s.Rb(19,"li"),s.tc(20," bubbling up reordering events, and also beginDrag, endDrag and drop events to a component that controls re-rendering the list; and "),s.Qb(),s.Rb(21,"li"),s.tc(22,"storing a clone of your list to revert to on endDrag, or commit to on drop"),s.Qb(),s.Qb(),s.Rb(23,"p"),s.tc(24,"If that sounds like too much effort, this pattern is made easy and reusable in "),s.Rb(25,"code"),s.tc(26,"@ng-dnd/sortable"),s.Qb(),s.tc(27,". You can do it without introducing a new component, too. "),s.Qb(),s.Rb(28,"p"),s.tc(29,"You can compare the source code of this example to equivalent using that abstraction, "),s.Rb(30,"a",1),s.tc(31,"Simple list"),s.Qb(),s.tc(32,"."),s.Qb(),s.Mb(33,"basic-sortable")),2&e&&(s.zb(30),s.gc("routerLink",s.hc(1,T)))},directives:[d.a,i.c,_],encapsulation:2}),R),S=((k=function e(){_classCallCheck(this,e)}).\u0275mod=s.Jb({type:k}),k.\u0275inj=s.Ib({factory:function(e){return new(e||k)},imports:[[n.c,a.b,c.a,i.d.forChild([{path:"",component:Q}]),o.a]]}),k)}}]);