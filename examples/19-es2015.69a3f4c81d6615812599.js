(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"je2+":function(e,t,n){"use strict";n.r(t),n.d(t,"DrilldownModule",(function(){return te}));var s=n("2kYt"),i=n("sEIs"),r=n("Qq0t"),c=n("SrNW"),o=n("jIqt"),a=n("QQZH"),l=n("JHA6"),d=n("i7Dj"),h=n("YtkY"),g=n("Ohay"),u=n("C05f"),p=n("EM62");class b{constructor(){this.type="BEGIN_DRAG"}}class f{constructor(){this.type="END_DRAG"}}class y{constructor(e){this.keys=e,this.type="OPEN_TRANSIENT"}}class O{constructor(e){this.keys=e,this.type="DROP"}}class v{constructor(e){this.keys=e,this.type="TOGGLE"}}const m={structure:{Infraction:{Anecdotal:{Clumsily:{},Megalomaniac:{},Neurotic:{}},Basilica:{Salivate:{}},Candid:{Granada:{}}},Magnanimous:{"Jalape\xf1o":{Poppers:{}},"Jalape\xf1o2":{Poppers3:{}}},Byzantine:{Fault:{Tolerance:{}},Armadillo:{Farming:{}}}},open:{Infraction:!0,"Infraction.Basilica":!0,"Infraction.Basilica.Salivate":!0},preDragOpen:{}};let k=(()=>{class e{constructor(){this.actions$=new u.a({type:"@@init"}),this.store$=this.actions$.pipe(Object(c.a)(e.reducer,m),Object(o.a)(m),function(e,t,n,s){const i=new a.a(void 0,void 0,void 0);return e=>Object(l.a)(()=>i,void 0)(e)}(),Object(d.a)())}static makeKey(e){return e.join(".")}static toggleSingle(t,n){const s=e.makeKey(n);return Object.assign({},t,{[s]:!t[s]})}static openAllAncestors(t,n){t=Object.assign({},t);for(let s=0;s<n.length;s++)t[e.makeKey(n.slice(0,s+1))]=!0;return t}static reducer(t,n){switch(n.type){case"BEGIN_DRAG":return Object.assign(Object.assign({},t),{preDragOpen:t.open});case"END_DRAG":return Object.assign(Object.assign({},t),{open:t.preDragOpen});case"OPEN_TRANSIENT":return Object.assign(Object.assign({},t),{open:e.openAllAncestors(t.preDragOpen,n.keys)});case"DROP":return Object.assign(Object.assign({},t),{lastDrop:n.keys});case"TOGGLE":return Object.assign(Object.assign({},t),{open:e.toggleSingle(t.open,n.keys)});default:return t}}static recursiveGet(t,n){return 0===n.length?t:e.recursiveGet(t[n[0]],n.slice(0).splice(1))}select(e){return this.store$.pipe(Object(h.a)(e),Object(g.a)())}isOpen(t){return this.select(n=>null==t||0===t.length||n.open[e.makeKey(t)])}getChildren(t){return this.select(e=>e).pipe(Object(h.a)(n=>{const s=e.recursiveGet(n.structure,t);return Object.keys(s).sort()}))}beginDrag(){this.actions$.next(new b)}endDrag(){this.actions$.next(new f)}toggle(e){this.actions$.next(new v(e))}openTransient(e){this.actions$.next(new y(e))}drop(e){this.actions$.next(new O(e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=p.Hb({token:e,factory:e.\u0275fac}),e})();var w=n("8dL6"),D=n("ln0m"),j=n("xBIF");let C=(()=>{class e{constructor(e){this.dnd=e,this.beginDrag=new p.n,this.endDrag=new p.n,this.source=this.dnd.dragSource("EMAIL",{beginDrag:()=>(this.beginDrag.emit(),{}),endDrag:()=>{this.endDrag.emit()}}),this.opacity=this.source.listen(e=>e.isDragging()?.4:1)}ngOnDestroy(){this.source.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(p.Lb(r.c))},e.\u0275cmp=p.Fb({type:e,selectors:[["drilldown-source"]],outputs:{beginDrag:"beginDrag",endDrag:"endDrag"},decls:4,vars:5,consts:[[3,"dragSource"]],template:function(e,t){1&e&&(p.Rb(0,"div",0),p.cc(1,"async"),p.Rb(2,"p"),p.tc(3,"Drag this!"),p.Qb(),p.Qb()),2&e&&(p.qc("opacity",p.dc(1,3,t.opacity)),p.gc("dragSource",t.source))},directives:[j.c],pipes:[s.b],styles:["div[_ngcontent-%COMP%] {\n      border: 1px dashed #777;\n      background: #fff;\n      padding: 0.5rem 1rem;\n      margin-ottom: .5rem;\n      background-olor: white;\n      width: 8rem;;\n    }\n    div[_ngcontent-%COMP%], p[_ngcontent-%COMP%] { display: inline-block;, padding: 3px; margin: 0; }"]}),e})();var x=n("ZTXN"),M=n("xVbo"),_=n("CsoK"),$=n("EWqr");const P=new(n("DG/E").a)($.a);var I=n("5uGe"),R=n("ryP2");class N{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new T(e,this.delay,this.scheduler))}}class T extends I.a{constructor(e,t,n){super(e),this.delay=t,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,n=t.queue,s=e.scheduler,i=e.destination;for(;n.length>0&&n[0].time-s.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const t=Math.max(0,n[0].time-s.now());this.schedule(e,t)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(T.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,n=new E(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(R.a.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(R.a.createComplete()),this.unsubscribe()}}class E{constructor(e,t){this.time=e,this.notification=t}}var A=n("pBDD"),Q=n("mW0F");class G{constructor(e){this.notifier=e}call(e,t){const n=new F(e),s=Object(Q.a)(n,this.notifier);return s&&!n.seenValue?(n.add(s),t.subscribe(n)):n}}class F extends A.a{constructor(e){super(e),this.seenValue=!1}notifyNext(e,t,n,s,i){this.seenValue=!0,this.complete()}notifyComplete(){}}var L=n("J+dc");class z{constructor(e,t){this.type=e,this.item=t}}const S=function(e){return[e]};function B(e,t){if(1&e&&p.Mb(0,"drilldown-folder",3),2&e){const e=t.$implicit,n=p.bc(2);p.gc("keys",n.keys.concat(p.ic(1,S,e)))}}function q(e,t){if(1&e&&(p.Pb(0),p.Rb(1,"ul"),p.cc(2,"async"),p.rc(3,B,1,3,"drilldown-folder",2),p.cc(4,"async"),p.Qb(),p.Ob()),2&e){const e=p.bc();p.zb(1),p.Cb("has-children",p.dc(2,4,e.anyChildren$)),p.zb(2),p.gc("ngForOf",p.dc(4,6,e.children$))("ngForTrackBy",e.tracker)}}function J(e,t){if(1&e&&(p.Rb(0,"b"),p.tc(1),p.Qb()),2&e){const e=p.bc(2);p.zb(1),p.vc("",e.ownKey," ...")}}function K(e,t){if(1&e&&p.tc(0),2&e){const e=p.bc(2);p.vc(" ",e.ownKey," ")}}function Z(e,t){if(1&e&&p.Mb(0,"drilldown-folder",3),2&e){const e=t.$implicit,n=p.bc(3);p.gc("keys",n.keys.concat(p.ic(1,S,e)))}}function H(e,t){if(1&e&&(p.Rb(0,"ul"),p.cc(1,"async"),p.rc(2,Z,1,3,"drilldown-folder",2),p.cc(3,"async"),p.Qb()),2&e){const e=p.bc(2);p.Cb("root",0===e.keys.length)("has-children",p.dc(1,6,e.anyChildren$)),p.zb(2),p.gc("ngForOf",p.dc(3,8,e.children$))("ngForTrackBy",e.tracker)}}function V(e,t){if(1&e){const e=p.Sb();p.Rb(0,"li"),p.cc(1,"async"),p.cc(2,"async"),p.cc(3,"async"),p.Rb(4,"div",4),p.Zb("click",(function(){return p.nc(e),p.bc().toggle()})),p.rc(5,J,2,1,"b",0),p.cc(6,"async"),p.rc(7,K,1,1,"ng-template",null,5,p.sc),p.Qb(),p.rc(9,H,4,10,"ul",6),p.cc(10,"async"),p.Qb()}if(2&e){const e=p.mc(8),t=p.bc();p.Cb("root",0===t.keys.length)("is-open",p.dc(1,12,t.isOpen$))("is-over",p.dc(2,14,t.isOver$))("has-children",p.dc(3,16,t.anyChildren$)),p.zb(4),p.gc("dropTarget",t.target),p.zb(1),p.gc("ngIf",p.dc(6,18,t.anyChildren$))("ngIfElse",e),p.zb(4),p.gc("ngIf",p.dc(10,20,t.isOpen$))}}let W=(()=>{class e{constructor(e,t,n){this.tree=e,this.dnd=t,this.ngZone=n,this.target=function(e,t,n,s){const i=new x.a,r=e.dropTarget(t,Object.assign(Object.assign({},s),{hover:e=>{i.next(new z(e.getItemType(),e.getItem())),s.hover&&s.hover(e)}})),c=r.listen(e=>e.isOver()&&e.canDrop()).pipe(Object(g.a)(),Object(M.a)(e=>e)),o=r.listen(e=>e.isOver()).pipe(Object(g.a)(),Object(M.a)(e=>!1===e));var a;const l=c.pipe(Object(_.a)(i.pipe(function(e,t=P){var n;const s=(n=e)instanceof Date&&!isNaN(+n)?+e-t.now():Math.abs(e);return e=>e.lift(new N(s,t))}(n),(a=o,e=>e.lift(new G(a))),Object(L.a)(1)))).subscribe(s.onActivate);return r.add(l),r}(this.dnd,"EMAIL",600,{onActivate:e=>{this.tree.openTransient(this.keys)},drop:e=>{this.tree.drop(this.keys)}}),this.isOver$=this.target.listen(e=>e.isOver()&&e.canDrop())}get ownKey(){return 0===this.keys.length?"<root>":this.keys[this.keys.length-1]}ngOnInit(){this.children$=this.tree.getChildren(this.keys),this.anyChildren$=this.children$.pipe(Object(h.a)(e=>e&&e.length>0)),this.isOpen$=this.tree.isOpen(this.keys)}tracker(e,t){return t}toggle(){this.tree.toggle(this.keys)}ngOnDestroy(){this.target.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(p.Lb(k),p.Lb(r.c),p.Lb(p.z))},e.\u0275cmp=p.Fb({type:e,selectors:[["drilldown-folder"]],inputs:{keys:"keys"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["node",""],[3,"keys",4,"ngFor","ngForOf","ngForTrackBy"],[3,"keys"],[3,"dropTarget","click"],["leaf",""],[3,"root","has-children",4,"ngIf"]],template:function(e,t){if(1&e&&(p.rc(0,q,5,8,"ng-container",0),p.rc(1,V,11,22,"ng-template",null,1,p.sc)),2&e){const e=p.mc(2);p.gc("ngIf",0===t.keys.length)("ngIfElse",e)}},directives:[s.l,s.k,e,j.d],pipes:[s.b],styles:['[_nghost-%COMP%]     *{margin:0;padding:0}[_nghost-%COMP%]     li{list-style:none}[_nghost-%COMP%]     li.has-children{background:#fafad2;cursor:pointer}[_nghost-%COMP%]     li:not(.has-children){cursor:auto}[_nghost-%COMP%]     li.has-children>div:hover, [_nghost-%COMP%]     li.is-over>div{background:#d1c072}[_nghost-%COMP%]     ul{margin:0 0 0 20px;list-style:none;line-height:2em;font-family:Arial}[_nghost-%COMP%]     li{font-size:16px;position:relative}[_nghost-%COMP%]     li:before{position:absolute;left:-15px;top:0;content:"";display:block;border-left:1px solid #444;height:1em;border-bottom:1px solid #444;width:10px}[_nghost-%COMP%]     li:after{position:absolute;left:-15px;bottom:-7px;content:"";display:block;border-left:1px solid #444;height:100%}[_nghost-%COMP%]     li.root{margin:0 0 0 -20px}[_nghost-%COMP%]     li.root:before{display:none}[_nghost-%COMP%]     li.root:after{display:none}[_nghost-%COMP%]     li:last-child:after{display:none}'],changeDetection:0}),e})();function Y(e,t){if(1&e&&(p.Rb(0,"p"),p.tc(1,"Last dropped on "),p.Rb(2,"code"),p.tc(3),p.Qb(),p.Qb()),2&e){const e=t.ngLet;p.zb(3),p.vc(" ",e?e.join(" > "):"(never)"," ")}}const X=function(){return[]};let U=(()=>{class e{constructor(e){this.tree=e,this.lastDrop$=this.tree.select(e=>e.lastDrop)}beginDrag(){this.tree.beginDrag()}endDrag(){this.tree.endDrag()}}return e.\u0275fac=function(t){return new(t||e)(p.Lb(k))},e.\u0275cmp=p.Fb({type:e,selectors:[["drilldown-container"]],decls:16,vars:5,consts:[["path","drilldown"],[4,"ngLet"],[3,"beginDrag","endDrag"],[3,"keys"]],template:function(e,t){1&e&&(p.Mb(0,"app-example-link",0),p.Rb(1,"p"),p.tc(2,"Hover over a folder to temporarily drill down. Click normally on a folder to open or close it."),p.Qb(),p.Rb(3,"p"),p.tc(4," This example uses a wrapper around "),p.Rb(5,"code"),p.tc(6,"DndService#dropTarget"),p.Qb(),p.tc(7,", that listens to dnd-core hover events and fires a callback when you have hovered long enough. This is a clean pattern for extending "),p.Rb(8,"code"),p.tc(9,"@ng-dnd/core"),p.Qb(),p.tc(10," in a reusable way. "),p.Qb(),p.rc(11,Y,4,1,"p",1),p.cc(12,"async"),p.Rb(13,"p"),p.Rb(14,"drilldown-source",2),p.Zb("beginDrag",(function(){return t.beginDrag()}))("endDrag",(function(){return t.endDrag()})),p.Qb(),p.Qb(),p.Mb(15,"drilldown-folder",3)),2&e&&(p.zb(11),p.gc("ngLet",p.dc(12,2,t.lastDrop$)),p.zb(4),p.gc("keys",p.hc(4,X)))},directives:[w.a,D.a,C,W],pipes:[s.b],styles:["[_nghost-%COMP%] {\n    display: block;\n    min-height: 600px;\n  }"]}),e})();var ee=n("JqZp");let te=(()=>{class e{}return e.\u0275mod=p.Jb({type:e}),e.\u0275inj=p.Ib({factory:function(t){return new(t||e)},providers:[k],imports:[[s.c,r.b,i.d.forChild([{path:"",component:U}]),ee.a]]}),e})()}}]);