(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{VpmW:function(t,e,n){"use strict";n.r(e),n.d(e,"BasicSortableModule",(function(){return y}));var r=n("2kYt"),i=n("sEIs"),c=n("Qq0t"),a=n("m3KN"),o=n("JqZp"),s=n("EM62"),d=n("8dL6"),b=n("4s1X"),g=n("xBIF");function l(t,e){1&t&&s.Nb(0)}const u=function(t){return{$implicit:t}};let p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=s.Gb({type:t,selectors:[["","cardInner",""]]}),t})(),h=(()=>{class t{constructor(t,e){this.elRef=t,this.dnd=e,this.beginDrag=new s.n,this.endDrag=new s.n,this.handleMove=new s.n,this.cardSource=this.dnd.dragSource("CARD",{beginDrag:()=>(this.beginDrag.emit(),{id:this.id,index:this.index}),endDrag:t=>{const e=t.didDrop();this.endDrag.emit(e)}}),this.cardTarget=this.dnd.dropTarget("CARD",{hover:t=>{const e=t.getItem().index,n=this.index;if(e===n)return;const r=this.elRef.nativeElement.getBoundingClientRect(),i=(r.bottom-r.top)/2,c=t.getClientOffset().y-r.top;e<n&&c<i||e>n&&c>i||(this.handleMove.emit([e,n]),t.getItem().index=n)}}),this.isDragging$=this.cardSource.listen(t=>t.isDragging()),this.opacity$=this.cardSource.listen(t=>t.isDragging()?.2:1)}moveCard(t,e){this.handleMove.emit([t,e])}ngOnDestroy(){this.cardSource.unsubscribe(),this.cardTarget.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Lb(s.l),s.Lb(c.c))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-card"]],contentQueries:function(t,e,n){var r;1&t&&s.Db(n,p,!0,s.K),2&t&&s.lc(r=s.ac())&&(e.cardInnerTemplate=r.first)},inputs:{card:"card",index:"index",id:"id",text:"text"},outputs:{beginDrag:"beginDrag",endDrag:"endDrag",handleMove:"handleMove"},decls:4,vars:10,consts:[[1,"card",3,"dropTarget","dragSource"],[1,"border"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(s.Rb(0,"div",0),s.cc(1,"async"),s.Rb(2,"div",1),s.rc(3,l,1,0,"ng-container",2),s.Qb(),s.Qb()),2&t&&(s.qc("opacity",s.dc(1,6,e.opacity$)),s.gc("dropTarget",e.cardTarget)("dragSource",e.cardSource),s.zb(3),s.gc("ngTemplateOutlet",e.cardInnerTemplate)("ngTemplateOutletContext",s.ic(8,u,e.card)))},directives:[g.d,g.c,r.p],pipes:[r.b],styles:[".card[_ngcontent-%COMP%] {\n        padding-bottom: 0.25rem;\n        background-color: white;\n        cursor: move;\n    }\n    .border[_ngcontent-%COMP%] {\n        padding: 0.5rem 1rem;\n        border: 1px dashed gray;\n    }"],changeDetection:0}),t})();function m(t,e){if(1&t&&(s.Rb(0,"span"),s.tc(1),s.Qb()),2&t){const t=e.$implicit,n=s.bc(2).item;s.zb(1),s.wc("",n.index+1," ",t.text,"")}}function f(t,e){if(1&t&&(s.Rb(0,"app-card",4),s.rc(1,m,2,2,"span",5),s.Qb()),2&t){const t=s.bc().item,e=s.bc();s.gc("card",e.findCard(t.id))}}function D(t,e){1&t&&(s.Rb(0,"div",2),s.rc(1,f,2,1,"app-card",3),s.Qb()),2&t&&(s.gc("ngSwitch",e.$implicit),s.zb(1),s.gc("ngSwitchCase","CARD"))}function x(t,e){if(1&t&&(s.Rb(0,"span"),s.tc(1),s.Qb()),2&t){const t=e.$implicit;s.zb(1),s.uc(t.text)}}function v(t,e){if(1&t){const t=s.Sb();s.Rb(0,"app-card",6),s.Zb("handleMove",(function(e){return s.nc(t),s.bc().moveCard(e)}))("beginDrag",(function(e){return s.nc(t),s.bc().beginDrag(e)}))("endDrag",(function(e){return s.nc(t),s.bc().endDrag(e)})),s.rc(1,x,2,1,"span",5),s.Qb()}if(2&t){const t=e.$implicit;s.gc("index",e.index)("id",t.id)("card",t)}}let w=(()=>{class t{constructor(){this.cards=[{id:1,text:"Write a cool JS library"},{id:2,text:"Make it generic enough"},{id:3,text:"Write README"},{id:4,text:"Create some examples"},{id:5,text:"Write a glorious Medium post to promote it (note that this element is taller, and far more important, than the others)"},{id:6,text:"Sit back and relax"}],this.origCards=this.cards}findCard(t){return this.cards.find(e=>e.id===t)}beginDrag(){this.origCards=this.cards.slice(0)}endDrag(t){t||(this.cards=this.origCards)}moveCard([t,e]){const n=this.cards[t];this.cards.splice(t,1),this.cards.splice(e,0,n)}tracker(t,e){return e.id}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Fb({type:t,selectors:[["basic-sortable"]],decls:4,vars:2,consts:[[1,"sorted"],[3,"index","id","card","handleMove","beginDrag","endDrag",4,"ngFor","ngForOf","ngForTrackBy"],[1,"sorted",3,"ngSwitch"],[3,"card",4,"ngSwitchCase"],[3,"card"],[4,"cardInner"],[3,"index","id","card","handleMove","beginDrag","endDrag"]],template:function(t,e){1&t&&(s.Rb(0,"dnd-preview"),s.rc(1,D,2,2,"ng-template"),s.Qb(),s.Rb(2,"div",0),s.rc(3,v,2,3,"app-card",1),s.Qb()),2&t&&(s.zb(3),s.gc("ngForOf",e.cards)("ngForTrackBy",e.tracker))},directives:[b.a,r.k,r.n,r.o,h,p],styles:[".sorted[_ngcontent-%COMP%] { width: 100%; max-width: 400px; }"]}),t})();const R=function(){return["/sortable","simple"]};let Q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Fb({type:t,selectors:[["basic-sortable-container"]],decls:34,vars:2,consts:[["path","basic-sortable"],[3,"routerLink"]],template:function(t,e){1&t&&(s.Mb(0,"app-example-link",0),s.Rb(1,"p"),s.tc(2," You can make a sortable by: "),s.Qb(),s.Rb(3,"ul"),s.Rb(4,"li"),s.tc(5,"giving each card a "),s.Rb(6,"code"),s.tc(7,"DragSource"),s.Qb(),s.tc(8," and a "),s.Rb(9,"code"),s.tc(10,"DropTarget"),s.Qb(),s.tc(11,";"),s.Qb(),s.Rb(12,"li"),s.tc(13,"determining when you are hovering on the upper or lower half of a neighbouring card using "),s.Rb(14,"code"),s.tc(15,"monitor.getClientOffset()"),s.Qb(),s.tc(16,"; "),s.Qb(),s.Rb(17,"li"),s.tc(18,"working out when a reordering is necessary by comparing the index with the item in flight's index;"),s.Qb(),s.Rb(19,"li"),s.tc(20," bubbling up reordering events, and also beginDrag, endDrag and drop events to a component that controls re-rendering the list; and "),s.Qb(),s.Rb(21,"li"),s.tc(22,"storing a clone of your list to revert to on endDrag, or commit to on drop"),s.Qb(),s.Qb(),s.Rb(23,"p"),s.tc(24,"If that sounds like too much effort, this pattern is made easy and reusable in "),s.Rb(25,"code"),s.tc(26,"@ng-dnd/sortable"),s.Qb(),s.tc(27,". You can do it without introducing a new component, too. "),s.Qb(),s.Rb(28,"p"),s.tc(29,"You can compare the source code of this example to equivalent using that abstraction, "),s.Rb(30,"a",1),s.tc(31,"Simple list"),s.Qb(),s.tc(32,"."),s.Qb(),s.Mb(33,"basic-sortable")),2&t&&(s.zb(30),s.gc("routerLink",s.hc(1,R)))},directives:[d.a,i.c,w],encapsulation:2}),t})(),y=(()=>{class t{}return t.\u0275mod=s.Jb({type:t}),t.\u0275inj=s.Ib({factory:function(e){return new(e||t)},imports:[[r.c,c.b,a.a,i.d.forChild([{path:"",component:Q}]),o.a]]}),t})()}}]);